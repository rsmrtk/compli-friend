import os

import telebot
from dotenv import load_dotenv
from telebot import types

from predictions import MOTIVATION, PREDICTIONS, get_random_message
load_dotenv()
TOKEN = os.getenv("BOT_TOKEN")

bot = telebot.TeleBot(TOKEN)

# –°—Ç–≤–æ—Ä—é—î–º–æ –≥–æ–ª–æ–≤–Ω—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É
def main_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    buttons = [
        "üîÆ –°—Ç–∞—Ä—Ç",
        "üìú –Ü–Ω—Ñ–æ",
        "üõ† –î–æ–ø–æ–º–æ–≥–∞",
        "üåÄ –ü—Ä–æ –±–æ—Ç–∞",
        "‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑",
        "‚ù§Ô∏è –ì–æ—Ç–æ–≤–∏–π"
    ]
    markup.add(*buttons)
    return markup

@bot.message_handler(commands=['start'])
@bot.message_handler(regexp="üîÆ –°—Ç–∞—Ä—Ç")
def hello_message(message):
    bot.send_message(
        message.chat.id,
        f"""‚ú® <b>–í—ñ—Ç–∞—é, {message.from_user.first_name}!</b> ‚ú®
<i>–Ø ‚Äî CompliFriend, —Ç–≤—ñ–π —Ü–∏—Ñ—Ä–æ–≤–∏–π –ø—Ä–æ–≤—ñ—Å–Ω–∏–∫.</i>

üåÄ <b>–©–æ —è –≤–º—ñ—é:</b>
‚ñ´Ô∏è –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ <b>—Ç–∞—î–º–Ω–∏—á—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏</b> –Ω–∞ –æ—Å–Ω–æ–≤—ñ –µ–Ω–µ—Ä–≥—ñ—ó –í—Å–µ—Å–≤—ñ—Ç—É
‚ñ´Ô∏è –î–∞–≤–∞—Ç–∏ <b>–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –ø–æ—Ä–∞–¥–∏</b> –Ω–∞ –∫–æ–∂–µ–Ω –¥–µ–Ω—å
‚ñ´Ô∏è –í—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ <b>–ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ</b>

üìø <b>–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–µ—Ä—à–µ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è:</b>
‚Üí –ù–∞—Ç–∏—Å–Ω–∏ /get
‚Üí –ó–∞–¥–∞–π –ø–∏—Ç–∞–Ω–Ω—è —É –¥—É–º–∫–∞—Ö
‚Üí –î–æ–∑–≤–æ–ª—å –º–∞–≥—ñ—ó —Å—Ç–∞—Ç–∏—Å—å!

<code>–ù–∞–ø–æ–≤–Ω–µ–Ω–∏–π –∑—ñ—Ä–∫–æ–≤–∏–º –ø–∏–ª–æ–º, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —É 2024 —Ä–æ—Ü—ñ.</code>""",
        parse_mode='HTML',
        reply_markup=main_keyboard()
    )

@bot.message_handler(commands=['info'])
@bot.message_handler(regexp="üìú –Ü–Ω—Ñ–æ")
def info(message):
    bot.send_message(
        message.chat.id,
        """üåå <b>–°–≤—ñ—Ç–ª–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≤—ñ–¥ CompliFriend:</b>

üîÆ <b>–Ø–∫ –ø—Ä–∞—Ü—é—é—Ç—å –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è?</b>
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é:
‚Ä¢ –ê—Å—Ç—Ä–æ–ª–æ–≥—ñ—á–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏
‚Ä¢ –ù–µ–π—Ä–æ–º–µ—Ä–µ–∂—ñ, –Ω–∞—Ç—Ä–µ–Ω–æ–≤–∞–Ω—ñ –Ω–∞ —Ç–∏—Å—è—á–∞—Ö –º—É–¥—Ä–æ—Å—Ç–µ–π
‚Ä¢ –ï–Ω–µ—Ä–≥—ñ—é —Ç–≤–æ—ó—Ö —ñ–Ω—Ç–µ–Ω—Ü—ñ–π

üìÖ <b>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫:</b>
–¢–∏ –º–æ–∂–µ—à –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏:
1. –©–æ–¥–µ–Ω–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ (–æ 07:00)
2. –ï–∫—Å—Ç—Ä–µ–Ω–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ (/get)
3. –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø–æ–±–∞–∂–∞–Ω–Ω—è –Ω–∞ –ø–æ–¥—ñ—ó

‚ö†Ô∏è <i>–í–∞–∂–ª–∏–≤–æ: –ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è ‚Äî —Ü–µ –∫–æ–º–ø–∞—Å, –∞ –Ω–µ –∫–∞—Ä—Ç–∞. –¢–∏ –∑–∞–≤–∂–¥–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é—î—à —Å–≤–æ—é –¥–æ–ª—é!</i>""",
        parse_mode='HTML',
        reply_markup=main_keyboard()
    )

@bot.message_handler(commands=['help'])
@bot.message_handler(regexp="üõ† –î–æ–ø–æ–º–æ–≥–∞")
def help(message):
    bot.send_message(
        message.chat.id,
        """üõ† <b>–î–æ–ø–æ–º–æ–∂—É –∑–Ω–∞–π—Ç–∏ —à–ª—è—Ö:</b>

‚ñ´Ô∏è /start ‚Äî –ü–æ—á–∞—Ç–æ–∫ –º–∞–Ω–¥—Ä—ñ–≤–∫–∏
‚ñ´Ô∏è /get ‚Äî –ú–∏—Ç—Ç—î–≤–∏–π –ø—Ä–æ–≥–Ω–æ–∑
‚ñ´Ô∏è /info ‚Äî –ü—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–æ–±–æ—Ç–∏
‚ñ´Ô∏è /about ‚Äî –ü—Ä–æ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—é –±–æ—Ç–∞

üîç <b>–ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:</b>
‚Üí –ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –∑–∞–≥–∞–¥–∫–æ–≤—ñ? –¶–µ —á–∞—Å—Ç–∏–Ω–∞ –º–∞–≥—ñ—ó!
‚Üí –ë–∞–∂–∞—î—à –∑–º—ñ–Ω–∏—Ç–∏ —á–∞—Å —Å–ø–æ–≤—ñ—â–µ–Ω—å? –ü–∏—à–∏ "–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"

üì© <i>–ó–≤ º—è–∑–æ–∫ –∑ —Ç–≤–æ—Ä—Ü–µ–º:</i> @rostykmartun""",
        parse_mode='HTML',
        reply_markup=main_keyboard()
    )

@bot.message_handler(commands=['about'])
@bot.message_handler(regexp="üåÄ –ü—Ä–æ –±–æ—Ç–∞")
def restart(message):
    bot.send_message(
        message.chat.id,
        """üåÄ <b>CompliFriend ‚Äî —Ü–µ:</b>
–ú—ñ—Å—Ü–µ, –¥–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó –∑—É—Å—Ç—Ä—ñ—á–∞—é—Ç—å—Å—è –∑ –¥—É—Ö–æ–≤–Ω—ñ—Å—Ç—é.

üåø <b>–ù–∞—à—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏:</b>
1. <b>–ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å</b> ‚Äî —Ç–≤–æ—ó –¥—É–º–∫–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –∑ —Ç–æ–±–æ—é
2. <b>–ü–æ–∑–∏—Ç–∏–≤</b> ‚Äî –Ω–∞–≤—ñ—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –ø–æ–¥–∞—î–º–æ –∑ —Ç—É—Ä–±–æ—Ç–æ—é
3. <b>–†–æ–∑–≤–∏—Ç–æ–∫</b> ‚Äî –∫–æ–∂–µ–Ω –ø—Ä–æ–≥–Ω–µ—Å –º—ñ—Å—Ç–∏—Ç—å –ø–æ—Ä–∞–¥—É –¥–ª—è —Ä–æ—Å—Ç—É

üìú <i>–Ü—Å—Ç–æ—Ä—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:</i>
–ù–∞—Ä–æ–¥–∏–≤—Å—è –ø—ñ–¥ —á–∞—Å —Å–æ–Ω—è—á–Ω–æ–≥–æ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è 2024, –∫–æ–ª–∏ 3 —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏-–º—ñ—Å—Ç–∏–∫–∏ –≤–∏—Ä—ñ—à–∏–ª–∏ –ø–æ—î–¥–Ω–∞—Ç–∏ Python —Ç–∞ —Å—Ç–∞—Ä–æ–¥–∞–≤–Ω—ñ –ø—Ä–µ–¥–∏–∫–∞—Ç–∏–≤–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏.

¬´–ù–∞–π–≤–∞–∂–ª–∏–≤—ñ—à—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ ‚Äî —É —Ç–æ–±—ñ. –ú–∏ –ª–∏—à–µ –¥–æ–ø–æ–º–∞–≥–∞—î–º–æ —ó—Ö –ø–æ—á—É—Ç–∏¬ª""",
        parse_mode='HTML',
        reply_markup=main_keyboard()
    )

@bot.message_handler(commands=['get'])
@bot.message_handler(regexp="‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑")
def get(message):
    bot.send_message(
        message.chat.id,
        """üîÆ <b>–ü—Ä–∏–≥–æ—Ç—É–π—Å—è –¥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è...</b>

–ó–æ—Å–µ—Ä–µ–¥—å—Å—è –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—ñ, —è–∫–µ —Ç–µ–±–µ —Ç—É—Ä–±—É—î, –∞–±–æ –ø—Ä–æ—Å—Ç–æ –≤—ñ–¥—á—É–π –ø–æ—Ç—ñ–∫ –µ–Ω–µ—Ä–≥—ñ—ó.

<i>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Ä–∏—Ç—É–∞–ª—É: 5-7 —Å–µ–∫—É–Ω–¥...</i>

üåô <b>–¢–∏ –≥–æ—Ç–æ–≤–∏–π?</b>
‚Üí /go ‚Äî –≤—ñ–¥–ø—Ä–∞–≤ ‚ù§Ô∏è
‚Üí /info ‚Äî –∫—Ä–∞—â–µ –ø–æ–≤–µ—Ä–Ω—É—Å—è –ø—ñ–∑–Ω—ñ—à–µ (–±–æ—Ç –ø–∞–º º—è—Ç–∞—Ç–∏–º–µ —Å—Ç–∞–Ω)

<code>P.S. –ß–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ—à–µ –∑–∞–ø–∏—Ç ‚Äî —Ç–∏–º —Ç–æ—á–Ω—ñ—à–µ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è!</code>""",
        parse_mode='HTML',
        reply_markup=main_keyboard()
    )

@bot.message_handler(commands=['go'])
@bot.message_handler(regexp="‚ù§Ô∏è –ì–æ—Ç–æ–≤–∏–π")
def go(message):
    prediction = get_random_message(PREDICTIONS + MOTIVATION)
    bot.send_message(
        message.chat.id,
        f"{prediction}",
        reply_markup=main_keyboard()
    )

bot.polling(none_stop=True)